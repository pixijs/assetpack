"use strict";(self.webpackChunk_assetpack_docs=self.webpackChunk_assetpack_docs||[]).push([[718],{9409:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>l,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var i=s(1085),n=s(1184),a=s(4944);const r={sidebar_position:1},c="Cache Buster",o={id:"guide/pipes/cache-buster",title:"Cache Buster",description:"The cacheBuster plugin is an essential tool for ensuring that assets are correctly updated when they change.",source:"@site/docs/guide/pipes/cache-buster.mdx",sourceDirName:"guide/pipes",slug:"/guide/pipes/cache-buster",permalink:"/assetpack/docs/guide/pipes/cache-buster",draft:!1,unlisted:!1,editUrl:"https://github.com/pixijs/assetpack/tree/main/packages/docs/docs/guide/pipes/cache-buster.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"guide",previous:{title:"Overview",permalink:"/assetpack/docs/guide/pipes/overview"},next:{title:"Audio & FFmpeg",permalink:"/assetpack/docs/guide/pipes/ffmpeg"}},d={},p=[{value:"Example",id:"example",level:2},{value:"Spine and Texture Packer",id:"spine-and-texture-packer",level:2},{value:"Example",id:"example-1",level:3}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"cache-buster",children:"Cache Buster"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"cacheBuster"})," plugin is an essential tool for ensuring that assets are correctly updated when they change.\nWhen the ",(0,i.jsx)(t.code,{children:"cacheBuster"})," plugin is added to the AssetPack configuration file, it generates unique hashes and appends them to file names.\nThis process ensures that when assets are modified, the updated versions are correctly re-downloaded by the user's browser, bypassing any cached versions."]}),"\n",(0,i.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(a.qH,{image:"cache/cache-buster",height:350}),"\n",(0,i.jsxs)(t.p,{children:["To use the ",(0,i.jsx)(t.code,{children:"cacheBuster"})," plugin, include it in your AssetPack pipeline.\nIt's crucial to note that the order of plugins in the pipeline affects the final output. For optimal results,\nensure that the ",(0,i.jsx)(t.code,{children:"cacheBuster"})," transformation occurs at the correct stage in your pipeline."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:'// assetpack.config.ts\nimport { cacheBuster } from "@assetpack/core";\n\nexport default {\n  ...\n  pipes: {\n    ...\n    // make sure these pipes are added after plugins that generate files\n    cacheBuster(),\n  },\n};\n'})}),"\n",(0,i.jsx)(t.h2,{id:"spine-and-texture-packer",children:"Spine and Texture Packer"}),"\n",(0,i.jsxs)(t.p,{children:["When integrating with the ",(0,i.jsx)(t.a,{href:"/docs/guide/pipes/texture-packer",children:(0,i.jsx)(t.code,{children:"texturePacker"})})," plugin or your porject has spine atlas files,\nyou need to add the ",(0,i.jsx)(t.code,{children:"texturePackerCacheBuster"})," / ",(0,i.jsx)(t.code,{children:"spineAtlasCacheBuster"})," pipes immediately after the ",(0,i.jsx)(t.code,{children:"cacheBuster"})," pipe."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"texturePackerCacheBuster"})," ensures that the JSON files internally update their asset names to reflect the newly hashed file names.\nThe ",(0,i.jsx)(t.code,{children:"spineAtlasCacheBuster"})," pipe performs a similar function for spine atlas files."]}),"\n",(0,i.jsx)(t.h3,{id:"example-1",children:"Example"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:'// assetpack.config.ts\nimport { cacheBuster, texturePackerCacheBuster, spineAtlasCacheBuster } from "@assetpack/core";\n\nexport default {\n  ...\n  pipes: {\n    ...\n    // make sure these pipes are added after plugins that generate files\n    cacheBuster(),\n    texturePackerCacheBuster(),\n    spineAtlasCacheBuster(),\n  },\n};\n'})})]})}function l(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},4944:(e,t,s)=>{s.d(t,{qH:()=>c});var i=s(4041),n=s(1085);const a=e=>{let{toggleImage:t,showImage1:s}=e;return(0,n.jsx)("div",{style:{width:"100%"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",padding:"10px"},children:[(0,n.jsx)("p",{style:{margin:"0 10px"},children:s?"Original":"Processed"}),(0,n.jsx)("div",{onClick:t,style:{position:"relative",width:"60px",height:"30px",backgroundColor:"hsl(225 6% 13%)",borderRadius:"15px",cursor:"pointer",transition:"background-color 0.3s",border:"2px solid #696969"},children:(0,n.jsx)("div",{style:{position:"absolute",top:"3px",left:s?"5px":"32px",width:"20px",height:"20px",backgroundColor:s?"var(--ifm-color-secondary)":"var(--ifm-color-primary)",borderRadius:"50%",transition:"left 0.3s"}})})]})})},r=e=>{let{image:t,primaryBoxShadow:s}=e;return(0,n.jsx)("div",{style:{width:"100%",height:"100%",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute"},children:(0,n.jsx)("img",{src:t,alt:"Input Image",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"12px",boxShadow:s?"0 0 20px hsla(340, 70%, 44%, 0.5)":"0 0 20px hsla(192, 84%, 40%, 0.5)"}})})},c=e=>{let{image:t,height:s}=e;const[c,o]=(0,i.useState)(!0);s??=350;const d=`/assetpack/screenshots/${t}.png`,p=`/assetpack/screenshots/${t}-pro.png`;return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",paddingBottom:"24px"},children:[(0,n.jsx)(a,{toggleImage:()=>{o(!c)},showImage1:c}),(0,n.jsxs)("div",{style:{position:"relative",pointerEvents:"none",width:"100%",height:s},children:[(0,n.jsx)("div",{style:{transition:"opacity 0.5s ease-in-out",opacity:c?1:0,position:"absolute",width:"100%",height:"100%"},children:(0,n.jsx)(r,{image:d,primaryBoxShadow:!1})}),(0,n.jsx)("div",{style:{transition:"opacity 0.5s ease-in-out",opacity:c?0:1,position:"absolute",width:"100%",height:"100%"},children:(0,n.jsx)(r,{image:p,primaryBoxShadow:!0})})]})]})}},1184:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>c});var i=s(4041);const n={},a=i.createContext(n);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);